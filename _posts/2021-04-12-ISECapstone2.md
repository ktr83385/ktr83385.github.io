---
title: "산업시스템공학종합설계 최종 제안서"
excerpt: "산업시스템공학종합설계 두 번째 게시글"
toc: true
toc_sticky: true
categories:
  - 산업시스템공학종합설계
tags:
  - 산업시스템공학종합설계
  - 졸업프로젝트
  - 산업공학
  - 최종제안서
last_modified_at : 2021-04-12T20:50:00+05:00
---

> 4월9일 **산업시스템공학종합설계 최종 제안서를 작성, 제출했다.** 3월 15일 포스팅의 첫 번째 작성했던 제안서 이외에도, 팀원들과 5개의 제안서를 썼지만, 모두 휴지통으로 들어갔다. 그 중에는 괜찮은 주제도 있었지만, 주제의 시사성, 최종 결과물 등을 고려하여 남은 2달동안 진행할 우리의 종합설계 주제를 선정했다.

※ 이전 포스팅

[산업시스템공학종합설계 1. 제안서](https://ktr83385.github.io/%EC%82%B0%EC%97%85%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B3%B5%ED%95%99%EC%A2%85%ED%95%A9%EC%84%A4%EA%B3%84/ISECapstone/)

첫 번째 제안서 연구 주제는 **"딥러닝 기반 영상 인식을 통한 미허가 공사 현장 검출 시스템 개발"** 이었다. 간략하게, 학부생 애송이(?)가 볼때에도 4가지 측면에서의 문제점이 있었다.

* 1. 범위 정의
* 2. 문제 분석
* 3. 요구사항 분석
* 4. 의사결정 분석

자세하게는 저번 포스팅에 담겨있다. 이번 4/9에 최종 제출한 제안서는 다음과 같다.

* * *

# 2021학년도 1학기 산업시스템공학종합설계 최종 제안서

## 1. 연구 주제

딥러닝 기반 영상 인식을 통한 놀이터에서의 **어린이 낙상 감지 시스템 개발**

## 2. 연구 배경

 낙상(추락, 넘어짐, 접질림)은 어린이 놀이시설 사고 중 82.1%를 차지하는 가장 높은 위험 요인이며, 빠른 사후 조치가 이루어지지 않을 시, 심각한 부상을 초래할 수 있다(행정안전부, 2019). 이러한 상황을 방지하기 위해 다양한 낙상 감지 시스템에 대한 연구가 이루어지고 있으며, 이는 크게 ‘웨어러블 센서’, ‘주변 센서’, ‘카메라 기반 인식’으로 분류할 수 있다. (Pranesh Vallabh and Reza Malekian, 2018). 

### 1) 웨어러블 센서를 이용한 경우

 대상자의 허벅지에 가속도계 웨어러블 센서를 부착하여 활동 데이터를 수집한다. 가속도를 측정하여 임계 값을 정하고 해당 값이 넘어가면 낙상으로 인식한다. 이 시스템은 부착 센서로 낙상을 감지하여 정확도가 높다. 하지만 적용 시, 감지 환경 내 대상자마다 센서를 부착하기 어렵고, 대상자 특성을 고려해야 하며, 주기적 배터리 교체가 필요하고 알림 범위가 작다는 단점이 있다 (Wala Saadeh et al. , 2019).

### 2) 주변 센서를 이용한 경우

 움직임을 감지하는 여러 depth 측정 센서에서 취합된 데이터를 바탕으로 Pretrained CNN을 이용해 학습시킨다. 이는 실내에서 효율적으로 감지가 가능하며, 센서 자체로도 부분적 인식이 가능하지만, 환경 내에 사람 등 장애물이 있으면 감지가 어렵다는 단점이 있고, 외부에서 사용 시 주변의 노이즈로 인해 정확도가 낮아진다. (Anishchenko et al. , 2019). 또한 3D Ground Plane Detection을 사용하여 배경과 대상자를 구분하고, 움직임의 변화와 머리 위치 및 실루엣을 파악해 낙상을 감지하고, 2D와 3D pose detection을 병용하여 정확성을 높였다. 하지만 이는 벽, 천장이 있어야만 활용이 가능하기 때문에 장소에 따라 정확도가 상이하다. 또한  lidar 센서, stereo camera 등 측정 장비로 인해 비용이 많이 드는 단점이 있다 (Markus D. Solbach and John K. Tsotsos, 2018). 

### 3) 카메라 기반 인식을 이용한 경우

 YOLO를 사용하여 객체의 행동 유형을 회색조로 변환 후 Gaussian Filter를 적용하고, 조정된 이미지를 추가적으로 학습하여 인식하였다. 이는 비용 절감, 실시간 인식, 높은 정확도 측면에서 장점이 있다. 하지만 4.5M이상의 거리에서는 75%이하로 정확도가 떨어지며, 다양한 각도에서 촬영 후에 분석해야 한다. 또한 장애물에 대상이 가려질 시 감지되지 않는 오 검출의 사례가 있고, 저화질에서의 사용이 어려운 단점이 있다 (김철연 등, 2018). CNN을 이용하여 인체의 2D-스켈레톤을 탐지하고, 관절 별 각가속도 변화를 기반으로 낙상에 대한 실시간 감지를 하였다. 하지만 바닥 및 천장의 유무에 따라 정확도 편차가 크다는 단점이 있다 (Wen-Nung Lie. , 2018). 또한 특정 자세 변화 조건을 만족하면서 프레임 간 시간 차이가 특정 임계치 이하일 때 낙상으로 인식하였다. Fast-RCNN을 이용하여 이진화 과정 없이 SSD로 학습된 객체인식 API를 이용하였다. RGB카메라만 이용하여 비용적 장점이 있고, 1.5m 이상의 거리에서 촬영각도와 상관없이 90%이상에 가까운 성공률을 보였다. 하지만 장애물이 대상을 가리고 있다면 오 검출하는 경우가 발생하며, 운동을 하고 있는 상태에서의 속도 변화를 측정하지 못한다는 단점이 있다 (원진영 , 2019). Faster-rcnn inception v2를 기반으로 대상자의 영역 전체를 인식하여 쓰러진 경우의 움직임과 일상의 움직임을 레이블링 하여 학습시키는 방식을 통해 낙상을 감지하였다. 이는 높은 정확도를 가지고 있지만 모델의 처리 속도가 느려 실시간 영상에서는 사용하기 어렵다는 단점이 있다 (박경민 등, 2020).
 어린이 놀이터에서의 사용성을 고려하면 웨어러블 방식은 어린이마다 센서 부착에는 한계가 있고, 주변 센서일 경우 장애물 및 외부 환경의 노이즈로 인해 낮은 정확도를 보인다. 이에 본 프로젝트에서는 주변 환경에 적은 영향을 받고 높은 정확도를 보이는 카메라 기반 인식을 사용한 낙상 감지에 대한 시스템을 개발하고자 한다. 

## 4. 문제 정의

놀이터에서 어린이 낙상 사고 감지 및 원인 분석 시스템의 부재

## 5. 연구 목표

 본 연구에서는 어린이를 대상으로 놀이터에서 가장 빈번하게 발생하는 낙상을 판단하는 시스템을 제안한다. 어린이의 활동성과 편의성을 고려해 기존 설치된 CCTV와 객체 검출 및 이상행동 감지 기술을 이용하여 외부 놀이터에서 어린이의 자세를 인식하고 자세의 변화 분석을 통해 어린이의 낙상 여부와 원인을 판단하여 경고를 발생시키는 어린이 낙상 감지 시스템을 제안하고자 한다.

## 6.연구의 방법론

 본 연구는 다음과 같은 방법으로 수행된다. 먼저 CCTV(단안카메라)를 활용한 객체인식을 통한 어린이 낙상 사고를 판단하는 시스템의 전체적인 프레임워크 제시 후 세부 프로세스를 설명한다. 본 연구의 프레임워크는 크게 두 개의 모듈로 구성되어 있다. 첫 번째 모듈은 객체인식 및 쓰러짐 여부 분류, 두 번째 모듈은 낙상 원인판단이다. [그림1]은 시스템 구성도이다.
 
![image](https://user-images.githubusercontent.com/55723966/114391711-ca09a800-9bd2-11eb-880d-c6bfe1444a71.png)
<center><그림 1></center>

 첫 번째 모듈은 객체인식 및 쓰러짐 여부 분류에 필요한 어린이 이미지 데이터를 수집 및 라벨링을 진행하고, coco dataset을 통해 pre-trained yolo-v4 모델을 기반으로 쓰러진 아이 검출을 목표로 라벨링한 데이터를 통해 transfer learning과 fine-tuning을 진행하여 쓰러진 아이를 검출하는 in-realtime detection이다. 어린이의 낙상 여부를 실시간으로 판별하기 위해서는 객체 인식 모델이 필요하다. 보통 R-CNN 계열의 알고리즘을 사용한다. 이들은 주로 긴 연산 시간을 갖는 Selective Search 알고리즘 수행에 기인하기 때문에 실시간 객체 인식 기술로 사용하기에 한계가 있다. 본 프로젝트의 목표는 위험 상황을 빠르게 인식하는 것이므로, [Table 1]은 YOLO v4와 Faster-RCNN 모델의 성능 비교표이다. 이와 같이 R-CNN계열에 비해 뒤지지 않는 정확도와 빠른 영상처리 속도를 가진 YOLO-v4를 선택했다. (Kim et al., 2020)  YOLO는 하나의 합성곱 신경망이 동시에 여러 개의 경계 상자를 예측하고 각 경계 상자에 대하여 분류 확률을 예측하는 알고리즘이다. (Alexey et al . , 2020) 
 
 두 번째 모듈은 낙상 원인판단으로 첫 번째 모듈의 낙상 여부가 판단되면 AVA Actions dataset과 직접 수집한 데이터를 통해 slow-fast 모델을 통하여 낙상 원인을 판별하는 것이다. 놀이터에서의 어린이 낙상 감지 시스템을 개발하는 것이 목표지만, 추락에 대한 데이터 수집을 위해 의도적으로 어린이가 낙상하는 장면을 촬영할 수 없기 때문에 마네킹 같은 모형을 활용한다. 낙상의 원인을 판단하기 위한 행동 분류 모델은 보편적으로 Skeleton을 활용한다. CNN을 이용하여 Skeleton을 추출하고, RNN과 LSTM 알고리즘을 사용하여 넘어지는 움직임을 학습시켜 실시간 감지가 가능하도록 했다. 하지만 바닥이 아닌 벽 등에 넘어지는 모션을 취하거나 객체가 겹칠 시 오검출될 가능성이 있는 단점이 있다. 또한 추락에 대한 학습 데이터가 없고, 저화질에서의 사용이 어렵다. (Lie,W,N. , Le,A.T., and Lin,G,H., 2018) Optical flow를 이용한 two-stream 방식은 프레임을 쌓아 faster R-CNN 모델을 사용하여 region proposal을 한다. 하지만 optical flow는 상대적으로 느린 변화로 보이는 색, 조도, 질감 등을 감지하는 RGB를 입력으로 동시에 학습시키는 과정에서 배경과 객체의 색이 같으면 오검출이 되는 단점이 있다. (Xiaojiang Peng et al., 2016) 본 기술에서는 추락 여부 판단이 핵심이다. 따라서 추락과 관련된 데이터가 비교적 많은  Slow Fast 모델을 사용한다. 이 모델에서는 사람의 인지 시스템을 모방해 움직임에 대한 학습을 Fast pathway와 Slow pathway로 나누었다. 학습시키는 프레임의 장수를 조절하여, Fast pathway는 움직임만을 포착하기 위해 비교적 높은 FPS를 쓰는 대신 더 적은 channel과 의미적 정보를 학습시키는 방식이다. 그리고 Slow pathway는 낮은 FPS로 잘 변하지 않는 의미적 정보를 학습 시킨다. 이를 통해 움직임을 빠르게 인식할 수 있어 학습에 대한 계산이 가벼워지고 처리속도가 빨라지게 된다. (C. Feichtenhofer et al. 2019)

## 7. 예측 결과 및 연구의 가치

 본 연구를 통해 데이터가 부족한 어린이 객체를 검출하여 낙상 감지 모델을 만든다. 실외 놀이시설의 환경에서 모델을 학습시켜 자세변화 분석을 통해 낙상여부, 원인을 판단한다. YOLO모델로 위험상황을 감지하는 모듈1과 SlowFast모델을 통해 원인 분석을 하는 모듈2로 감지 단계를 나눠 효율성이 높였다. 어린이 놀이시설에 필수적으로 설치되어 있는 cctv에 본 연구 시스템을 적용하여 추가 비용이 들지 않는다. 연구가 발전되면 낙상과 같은 놀이터내에서 발생 가능 사고 관련 데이터 학습으로 다양한 원인 파악이 가능하다. 이를 응급시설과 공유하여 빠른 사고 대처를 한다.

## 참고 문헌

### 국내문헌: 

1.	김정아, 성주영, 박세호 (2020) .Comparison of Faster-RCNN, YOLO, and SSD for Real-Time Vehicle Type Recognition, Korea Electronics Technology Institute , Contents Convergence Research Center
2.	김철연 (2018). YOLO를 이용한 CCTV 영상에서의 쓰러짐 검출.  한국정보과학회 학술발표논문집
3.	원진영  (2019). 객체인식 모니터링과 이미지 딥러닝을 이용한 독거노인의 낙 판단 방법론 개발. 석사학위논문, 동국대학교.
4.	한국소비자원 (2020). 2019년 어린이 안전사고 동향 분석. 위해정보국 위해예방팀
5.	Park, K.-M., Kim, S.-D., & Bae, C.-O. (2020). A Study on the Detection of Fallen Workers in Shipyard Using Deep Learning. Journal of the Korean Society of Marine Environment and Safety, 26(6), 601–605.

### 해외 문헌:

1.	Alexey, B., Chien-Yao and W.,Hong-Yuan Mark, L (2020). YOLOv4: Optimal Speed and Accuracy of Object Detection, arXiv preprint arXiv:2004.10934, 2020
2.	Anishchenko, L., Zhuravlev, A., & Chizh, M. (2019). Fall Detection Using Multiple Bioradars and Convolutional Neural Networks. Sensors, 19(24), 5569. doi:10.3390/s19245569
3.	C. Feichtenhofer, H. Fan, J. Malik and K. He (2019). "SlowFast Networks for Video Recognition," 2019 IEEE/CVF International Conference on Computer Vision (ICCV), Seoul, Korea (South), pp. 6201-6210
4.	Lie,W,N. , Le,A.T., and Lin,G,H. , (2018), Human Fall-down event detection based on 2d skeletons and deep learning approach,International Workshop on Advanced Image Technology
5.	Markus, D., Solbach, and John K., Tsotsos(2018). Vision-Based Fallen Person Detection for the Elderly. Department of Electrical Engineering and Computer Science York University, Canada
6.	Vallabh, P., and  Malekian, R, (2017),  Fall detection monitoring systems: A comprehensive review, J. Ambient Intell. Humanized Comput.,9, 1809-1833
7.	W. Lie, A. T. Le and G. Lin (2018). "Human fall-down event detection based on 2D skeletons and deep learning approach," 2018 International Workshop on Advanced Image Technology (IWAIT), Chiang Mai, Thailand, pp. 1-4
8.	.W. Saadeh, S. Butt and M. A. B. Altaf, "A High Accuracy and Low Latency Patient-Specific IoT-Based Wearable Fall Detection Prototype System", IEEE Transactions on Neural Systems & Rehabilitation Engineering (TNSRE), vol. 27, no. 5, pp. 995-1003, Apr. 2019
9.	Xiaojiang Peng, Cordelia Schmid (2016). Multi-region two-stream R-CNN for action detection. ECCV 2016 - European Conference on Computer Vision, Oct, Amsterdam, Netherlands. 


* * *

# 최종 제안서에 대한 정리

 일단, 제안서의 페이지 제한 수는 4페이지였다. ~~교수님....~~ 하고 싶은 말들만 다 넣어놓으면 10페이지도 족히 넘길 수 있지만, 진짜 전달하고 싶은 내용들만 요약하여 작성해야 했다. 우리는 첫 번째 제안서 이후 다른 주제들을 찾아보았고, 여러 아이디어들이 나왔었는데, 그 중에서 괜찮아 보이는 것들만 팀원들과 상의하여 간단한 제안서를 작성한 후, 지도 교수님께 들고 갔다. 교수님은 낙상 관련하여 주제를 잡아보면 좋을 것 같다고 말씀해주셨고(들고간 것 중에는 없었다..ㅎㅎㅎ 아! 노인 낙상이 있었다.), 결과적으로 어린이를 대상으로 낙상 감지, 예방 등에 집중하여 주제를 정했다.

 위에 4페이지 분량의 글이 적혀져 있지만, 작성한 팀원이 봐도 ㅋ ㅋ ~~가독성이 안 좋다.~~ 어쨌든, 지금 포스팅의 목적은 우리 팀이 이때 어떤 생각을 가지고 제안서를 썼고, 어떤 기대를 하고 있는 지에 대해서 남기기 위해서다. 

 교수님과 면담 후 어린이 낙상 감지를 주제로 정했을 때, 진짜 주제만 정해진 상태였다. 어떤 흐름으로 가서 어떤 결과물이 나올 지는 앞으로 생각해볼 문제였다. 우리는 막연하게 회의날까지 각자 조사해오기로 해놓고 막상 해보니, 너무 막막했다. 방향을 빠르게 잡아야 진전이 있을 것 같았다. 그래서 예전 공부했던 설계 과목의 내용들을 뒤졌다. 전에 공부했던 내용들을 살펴보니, 프로젝트를 어떻게 진행해야 할 지에 대한 것들이 조금씩 보였다.
 
 일단 첫 번째로 어린이 낙상 감지와 관련된 연구의 동향을 살펴봐야 했고, 살펴본 결과 위 제안서에 나와있듯이 1)웨어러블 센서, 2)주변센서를 이용, 3)카메라 기반 인식 이렇게 3가지 방법이 있었다. 이 중에서 우리는 산업공학기초설계에서 배웠던 대안도출 및 평가 방법을 적용하여 장/단점, 특징, 프로젝트의 한계, 자원 등을 종합하여 카메라 기반 인식 방법을 사용하기로 했다.

 카메라 기반 인식 방법을 정한 뒤 또 맞닥뜨린 것은 인공지능에 대한 연구가 활발했고, 신경망 알고리즘이 정말 많았다는 점이다. 따라서 이번에도 우리의 프로젝트에 맞게 선택을 해야 했다. 우리는 1차적으로 **"쓰러짐"**을 판별하는 것이 1차적 목표, 만약 쓰러졌다면 여러 원인들은 많겠지만, 그 중에서도 **"추락"**에 의한 것이었는 지 판별하는 것이 2차 목표였다. 위 작성한 제안서에는 이에 대한 설명이 부족했던 것 같다. 어쨌든 우리는 1차 쓰러짐을 판별하기 위해 1-stage로 인식이 빠른 Yolov4를 사용하기로 했고, 추락이라는 행위를 판단하기 위해 Slowfast라는 알고리즘을 선택했다. 
 
 
## 최종 제안서에 대한 학과 교수님들의 코멘트

* 데이터를 어떻게 확보할건지?에 대한 설명이 부족함.
* 어린이의 어떤 자세를 낙상으로 정의할지? 기초 근거 마련이 필요.
* 이와 같은 시스템을 만들어둔 뒤 알람이나 경고 등 어떤 식으로 결과를 활용할지에 대한 시나리오 서술이 없음.

 이렇게 적고 보니, 문제점이 하나 보인다.. 가장 근본적으로 낙상 여부와 추락 여부를 결정하는 것을 왜 분리했을까? 분리하는 이유가 있을까? 라는 부분이었다. 이에 대한 논리, 설명이 부족하다는 느낌이 들었다. 따라서 중간 발표때는 이에 대한 부분을 보완해야할 것 같다.